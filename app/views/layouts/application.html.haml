!!!
%html{lang: "en"}
  %head
    %meta{charset: "utf-8"}/
    %meta{content: "IE=Edge,chrome=1", "http-equiv" => "X-UA-Compatible"}/
    %meta{content: "width=device-width, initial-scale=1.0", name: "viewport"}/
    %title= content_for?(:title) ? yield(:title) : "Quest"
    = csrf_meta_tags
    / Le HTML5 shim, for IE6-8 support of HTML elements
    /[if lt IE 9]
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    = stylesheet_link_tag "application", :media => "all"
    / For third-generation iPad with high-resolution Retina display:
    / Size should be 144 x 144 pixels
    = favicon_link_tag 'apple-touch-icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '144x144'
    / For iPhone with high-resolution Retina display:
    / Size should be 114 x 114 pixels
    = favicon_link_tag 'apple-touch-icon-114x114-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '114x114'
    / For first- and second-generation iPad:
    / Size should be 72 x 72 pixels
    = favicon_link_tag 'apple-touch-icon-72x72-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '72x72'
    / For non-Retina iPhone, iPod Touch, and Android 2.1+ devices:
    / Size should be 57 x 57 pixels
    = favicon_link_tag 'apple-touch-icon-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png'
    / For all other devices
    / Size should be 32 x 32 pixels
    = favicon_link_tag 'favicon.ico', :rel => 'shortcut icon'
    = javascript_include_tag "application"
  %body
    %header.navbar.navbar-inverse.navbar-fixed-top
      .navbar-inner
        .row{style: "margin-top: 10px;margin-bottom: 10px;margin-left:10px;margin-right:10px"}
          .col-md-5.qtd-col
            .col-md-4.qtd-col
              .col-md-5.qtd-col
                %img#avatar.img-rounded.img-responsive{src: "/assets/Avatar.jpg"}/
              .col-md-7.qtd-col
                %div
                  %a{href: "/users/"}
                    =@user.username
                  %span#badge.badge.badge-important{"data-placement" => "right", "data-toggle" => "tooltip", title: "Notification"} 3
                %div{style: "color:#999999"}
                  C# Guru
                .progress.progress-mini{"data-placement" => "right", "data-toggle" => "tooltip", title: "Experience"}
                  .progress-bar{role: "progressbar", style: "width: 50%;"}
            .col-md-2
              %button.btn.btn-info{style: "margin-top: 0px;width: 40px", "data-placement" => "right", "data-toggle" => "tooltip", title: "Level"} 13
              %div{style: "margin-top: 5px"}
                %button.btn.btn-success{style: "margin-top: 0px;width: 40px", "data-placement" => "right", "data-toggle" => "tooltip", title: "Quick Add"}
                  %span.glyphicon.glyphicon-plus-sign
            .col-md-6.qtd-col
              %table{style: "margin-top: 10px"}
                %tr
                  %td
                    %span{style: "float: right;color:#ffffff"} Active Quest:
                  %td
                    %a{href: "#"} Github Integration
                %tr
                  %td
                    %span{style: "float: right;color:#ffffff"} Campaign:
                  %td
                    %a{href: "#"} Github API
          .col-md-7.qtd-col
            .col-md-5.qtd-col
              %form.navbar-form.navbar-left{role: "search"}
                .form-group
                  %input.form-control{placeholder: "Search", type: "text"}/
                %button.btn.btn-default{type: "submit"}
                  %span.glyphicon.glyphicon-search
            .col-md-6.qtd-col
              .navbar-inverse
                .navbar-header
                  %a.navbar-brand{href: "#"}
                    %span.glyphicon.glyphicon-map-marker
                .navbar-inner
                  %ul.nav.navbar-nav
                    %li{:class => "#{'active' if current_page?(root_path)}"}
                      %a{href: "#"} Timeline
                    %li{:class => "#{'active' if current_page?(root_path)}"}
                      %a{href: "#"} Priority
                    %li{:class => "#{'active' if current_page?(campaigns_path)}"}
                      %a{href: campaigns_path} Campaign
                    %li{:class => "#{'active' if current_page?(root_path)}"}
                      %a{href: "#"} Groups
              / <table class="header-table">
              / <tr>
              / <td>
              / <haml_loud> link_to "Timeline", "/pomodoros"  </haml_loud>
              / </td>
              / <td>
              / <haml_loud> link_to "Priority", "/pomodoros"  </haml_loud>
              / </td>
              / </tr>
              / <tr>
              / <td>
              / <haml_loud> link_to "Projects", "/pomodoros"  </haml_loud>
              / </td>
              / <td>
              / <haml_loud> link_to "Groups", "/pomodoros"  </haml_loud>
              / </td>
              / </tr>
              / </table>
            .col-md-1.qtd-col
              %a.countdown{style: "color:white; padding-right: 10px;"}
              %a#startStopBtn.btn.btn-primary Start
    .container
      .row
        %div{style: "padding-top: 110px"}
          - flash.each do |key, value|
            %div{class: "#{flash_class(key)} fade in"}
              %a.close{"data-dismiss" => "alert", href: "#"} ×
              = value
          = yield
    / /row
    %footer
      %p © Quest Till Done 2013
    / /container
#userPopContent.hide
  %p
    = link_to 'Edit Profile', edit_user_registration_path
  %p
    = link_to 'Log Out', destroy_user_session_path, :method => :delete

:javascript
  $(document).ready(function(){
     $('#avatar').popover({
        html: true,
        placement: "bottom",
        container: $(this).attr('id'),
        trigger: "manual",
        content: function () {
            return $('#userPopContent').html();
        }
     }).on("mouseenter", function () {
         var _this = this;
         $(this).popover("show");
         $(this).siblings(".popover").on("mouseleave", function () {
             $(_this).popover('hide');
         });
     }).on("mouseleave", function () {
         var _this = this;
         setTimeout(function () {
             if (!$(".popover:hover").length) {
                 $(_this).popover("hide")
             }
         }, 100);
     });
  });
